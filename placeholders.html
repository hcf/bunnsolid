<!doctype html>
<html class="no-js" lang="no">

<head>
  <meta charset="utf-8">
  <title>Bunnsolide webl√∏sninger - responsive images</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="css/styles.css">

  <style type="text/css">
    img {
      margin-bottom: 10rem;
    }
  </style>
</head>

<body>
  <h1><a href="/">Munch gallery</a></h1>
  
  <ul>
    <li><img loading="lazy" data-src="img/munch_0.jpg" src="img/munch_0_placeholder.svg" alt="" width="6232" height="7880"></li>
    <li><img loading="lazy" data-src="img/munch_1.jpg" src="img/munch_1_placeholder.svg" alt="" width="3475" height="3500"></li>
    <li><img loading="lazy" data-src="img/munch_2.jpg" src="img/munch_2_placeholder.jpg" alt="" width="1200" height="1547"></li>
    <li><img loading="lazy" data-src="img/munch_3.jpg" src="img/munch_3_placeholder.jpg" alt="" width="2000" height="1401"></li>
    <li><img loading="lazy" data-src="img/munch_4.jpg" src="img/munch_4_placeholder.svg" alt="" width="1200" height="1757"></li>
    <li><img loading="lazy" data-src="img/munch_5.jpg" src="img/munch_5_placeholder.svg" alt="" width="1280" height="964"></li>
    <li><img loading="lazy" data-src="img/munch_6.jpg" src="img/munch_6_placeholder.svg" alt="" width="1280" height="959"></li>
    <li><img loading="lazy" data-src="img/munch_7.jpg" src="img/munch_7_placeholder.svg" alt="" width="2000" height="1000"></li>
    <li><img loading="lazy" data-src="img/munch_8.jpg" src="img/munch_8_placeholder.svg" alt="" width="1440" height="1164"></li>
    <li><img loading="lazy" data-src="img/munch_9.jpg" src="img/munch_9_placeholder.svg" alt="" width="1220" height="713"></li>
    <li><img loading="lazy" data-src="img/munch_10.jpg" src="img/munch_10_placeholder.svg" alt="" width="1200" height="897"></li>
  </ul>

  <script type="text/javascript">
    const loadImageSrc = (img) => {
      img.src = img.getAttribute('data-src');
    }

    const imageIntersected = (entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          loadImageSrc(entry.target);
          observer.unobserve(entry.target);
        }
      });
    }

    const options = {
      // root: document.querySelector('#scrollArea'), // Default: browser viewport
      // rootMargin: '50px 0px',                      // Default: 0px 
      threshold: 0.1                                  // Default: 0
    };

    let imageObserver = new IntersectionObserver(imageIntersected, options);

    const images = document.querySelectorAll('img');

    images.forEach(image => {
        imageObserver.observe(image);
    });

  </script>

</body>

</html>